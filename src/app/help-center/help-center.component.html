<div class="help-center-hero">
  <div class="container py-5">
    <div class="row justify-content-center text-center">
      <div class="col-lg-8">
        <h1 class="display-5 fw-bold mb-3 animate-fade-in-down">Help Center</h1>
        <p class="lead mb-5 animate-fade-in">
          Find answers to common questions and get support for RosettaCloud
          services
        </p>

        <div class="search-container animate-fade-in-up">
          <div class="help-search-bar mx-auto">
            <i class="bi bi-search search-icon"></i>
            <input
              type="text"
              class="form-control"
              placeholder="Search for answers..."
              [(ngModel)]="searchQuery"
              (input)="onSearchChange()"
            />
            <button
              *ngIf="searchQuery"
              class="search-clear-btn"
              (click)="clearSearch()"
            >
              <i class="bi bi-x-circle-fill"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container py-5">
  <!-- FAQ Categories -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="faq-categories">
        <button
          class="category-btn"
          [class.active]="selectedCategory === 'all'"
          (click)="selectCategory('all')"
        >
          <i class="bi bi-grid-3x3-gap category-icon"></i>
          <span>All Categories</span>
        </button>
        <button
          *ngFor="let category of faqCategories"
          class="category-btn"
          [class.active]="selectedCategory === category.id"
          (click)="selectCategory(category.id)"
        >
          <i class="bi {{ category.icon }} category-icon"></i>
          <span>{{ category.name }}</span>
        </button>
      </div>
    </div>
  </div>

  <!-- FAQs -->
  <div class="row">
    <div class="col-lg-8">
      <div class="faq-container">
        <h2 class="faq-title mb-4">
          <ng-container *ngIf="selectedCategory === 'all'"
            >Frequently Asked Questions</ng-container
          >
          <ng-container *ngIf="selectedCategory !== 'all'">
            <!-- FIXED: Using getCategoryName method instead of inline binding with => -->
            {{ getCategoryName(selectedCategory) }}
          </ng-container>
        </h2>

        <!-- Search Results Status -->
        <div *ngIf="isSearching" class="text-center my-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Searching...</span>
          </div>
          <p class="mt-2">Searching FAQs...</p>
        </div>

        <!-- No Results Message -->
        <div
          *ngIf="filteredFaqs.length === 0 && !isSearching"
          class="text-center py-4"
        >
          <div class="no-results-icon">
            <i class="bi bi-search"></i>
          </div>
          <h4 class="mt-3">No results found</h4>
          <p class="text-muted">
            We couldn't find answers matching your search query
          </p>
          <button class="btn btn-outline-primary mt-2" (click)="clearSearch()">
            <i class="bi bi-arrow-counterclockwise me-2"></i>Clear Search
          </button>
        </div>

        <!-- FAQ Items -->
        <div class="accordion faq-accordion" *ngIf="filteredFaqs.length > 0">
          <div
            class="accordion-item faq-item"
            *ngFor="let faq of filteredFaqs; let i = index"
          >
            <h3 class="accordion-header">
              <button
                class="accordion-button"
                [class.collapsed]="!faq.isExpanded"
                (click)="toggleFaq(faq)"
              >
                {{ faq.question }}
              </button>
            </h3>
            <div
              class="accordion-collapse collapse"
              [class.show]="faq.isExpanded"
            >
              <div class="accordion-body">
                {{ faq.answer }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Support -->
    <div class="col-lg-4">
      <div class="support-card">
        <div class="card-icon">
          <i class="bi bi-headset"></i>
        </div>
        <h3 class="card-title">Need More Help?</h3>
        <p class="card-text">
          Can't find what you're looking for? Our support team is here to help
          you with any questions or issues.
        </p>

        <div class="contact-options">
          <a href="mailto:support@rosettacloud.app" class="contact-option">
            <i class="bi bi-envelope-fill me-2"></i>
            <span>support&#64;rosettacloud.app</span>
          </a>
          <a href="tel:+201234567890" class="contact-option">
            <i class="bi bi-telephone-fill me-2"></i>
            <span>+20 123 456 7890</span>
          </a>
          <div class="divider">
            <span>OR</span>
          </div>
          <button
            class="btn btn-primary w-100"
            data-bs-toggle="modal"
            data-bs-target="#contactModal"
          >
            <i class="bi bi-chat-dots-fill me-2"></i>
            Submit a Request
          </button>
        </div>

        <!-- Support Hours -->
        <div class="support-hours">
          <h4>Support Hours</h4>
          <p><i class="bi bi-clock-fill me-2"></i>Monday-Friday: 9am-6pm EET</p>
          <p><i class="bi bi-clock-fill me-2"></i>Saturday: 10am-2pm EET</p>
          <p class="text-muted">We typically respond within 24 hours</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contact Support Modal -->
<div
  class="modal fade"
  id="contactModal"
  tabindex="-1"
  aria-labelledby="contactModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="contactModalLabel">Contact Support</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="nameInput" class="form-label">Your Name</label>
            <input
              type="text"
              class="form-control"
              id="nameInput"
              placeholder="Enter your name"
            />
          </div>
          <div class="mb-3">
            <label for="emailInput" class="form-label">Email Address</label>
            <input
              type="email"
              class="form-control"
              id="emailInput"
              placeholder="Enter your email"
            />
          </div>
          <div class="mb-3">
            <label for="subjectInput" class="form-label">Subject</label>
            <select class="form-select" id="subjectInput">
              <option value="">Select a topic</option>
              <option value="account">Account Issues</option>
              <option value="courses">Course Related</option>
              <option value="payment">Payment & Billing</option>
              <option value="technical">Technical Problems</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="messageInput" class="form-label">Message</label>
            <textarea
              class="form-control"
              id="messageInput"
              rows="5"
              placeholder="Describe your issue or question in detail"
            ></textarea>
          </div>
          <div class="form-check mb-3">
            <input
              class="form-check-input"
              type="checkbox"
              id="attachScreenshot"
            />
            <label class="form-check-label" for="attachScreenshot">
              Include browser information and device details
            </label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button
          type="button"
          class="btn btn-primary"
          (click)="submitContactForm()"
          data-bs-dismiss="modal"
        >
          <i class="bi bi-send-fill me-2"></i>Submit Request
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Additional Help Resources -->
<div class="container-fluid help-resources-section py-5">
  <div class="container">
    <h2 class="text-center mb-5">More Ways to Get Help</h2>

    <div class="row g-4">
      <div class="col-md-4">
        <div class="resource-card">
          <div class="resource-icon">
            <i class="bi bi-book"></i>
          </div>
          <h3>Documentation</h3>
          <p>
            Browse our detailed documentation for in-depth guides on using
            RosettaCloud's features and services.
          </p>
          <a href="#" class="resource-link">View Documentation</a>
        </div>
      </div>

      <div class="col-md-4">
        <div class="resource-card">
          <div class="resource-icon">
            <i class="bi bi-play-circle"></i>
          </div>
          <h3>Video Tutorials</h3>
          <p>
            Watch step-by-step video guides to help you navigate and get the
            most out of our platform.
          </p>
          <a href="#" class="resource-link">Watch Tutorials</a>
        </div>
      </div>

      <div class="col-md-4">
        <div class="resource-card">
          <div class="resource-icon">
            <i class="bi bi-people"></i>
          </div>
          <h3>Community Forum</h3>
          <p>
            Connect with other users, share tips, and get help from our
            community of learners and experts.
          </p>
          <a href="#" class="resource-link">Join Discussion</a>
        </div>
      </div>
    </div>
  </div>
</div>
